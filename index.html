<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link href="https://fonts.googleapis.com/css2?family=OnePlus+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <title>HealthCare Monitoring â€” Login</title>

  <!-- Poppins font -->
  <!-- <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet"> -->

  <style>
    /* === FIX NAVBAR HEIGHT & BUTTON SIZES === */
.topbar {
    padding: 6px 10px !important;
    height: 52px !important;
}

.left {
    gap: 8px !important;
}

.logo img {
    width: 26px !important;
    height: 26px !important;
}

.brand h1 {
    font-size: 14px !important;
}

/* NAV LINKS SMALLER */
.nav a {
    font-size: 12px !important;
    padding: 4px 8px !important;
    border-radius: 6px !important;
}

/* FIX DARK MODE ICON */
#themeToggle {
    width: 32px !important;
    height: 32px !important;
    padding: 0 !important;
    border-radius: 50% !important;
    background: transparent !important;
    display: flex;
    justify-content: center;
    align-items: center;
}

/* FIX PAUSE ECG BUTTON */
#pauseBtn {
    padding: 6px 10px !important;
    font-size: 12px !important;
    border-radius: 6px !important;
}

/* FIX LOGOUT BUTTON */
#logoutBtn {
    padding: 6px 10px !important;
    font-size: 12px !important;
    border-radius: 6px !important;
}

/* FIX HAMBURGER BUTTON */
#hambBtn {
    font-size: 20px !important;
    padding: 0 6px !important;
}

/* === FIX CARD SIZE â€” REMOVE OVERSCALE === */
.card {
    border-radius: 10px !important;
    padding: 12px !important;
    box-shadow: 0 4px 12px rgba(0,0,0,0.07) !important;
}

/* === MAKE MOBILE UI COMPACT === */
@media (max-width: 600px) {
    .topbar {
        height: 48px !important;
        padding: 4px 8px !important;
    }

    .nav {
        display: none !important;
    }

    #pauseBtn, #logoutBtn {
        font-size: 10px !important;
        padding: 4px 6px !important;
    }

    #themeToggle {
        width: 28px !important;
        height: 28px !important;
    }

    .card {
        padding: 10px !important;
    }

    #ecgCanvas {
        height: 200px !important;
    }
}

    :root{
      --nav-bg:#0D47A1;
      --accent:#0D47A1;
      --bg:#f4f8ff;
      --card:#ffffff;
      --muted:#6b7280;
      --muted-strong:#526070;
      --glass: rgba(255,255,255,0.85);
      --success:#2e7d32;
      --danger:#d32f2f;
    }

    /* Basic reset */
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: 'OnePlus Sans', sans-serif !important;

      background:var(--bg);
      color:#111;
      min-height:100vh;
      display:flex;
      flex-direction:column;
      transition:background .25s color .25s;
      opacity:0;
      animation:pageFade .42s forwards .06s;
    }
    @keyframes pageFade{to{opacity:1}}

    /* Topbar */
    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:12px 20px;
      background:var(--nav-bg);
      color:#fff;
      box-shadow:0 10px 26px rgba(13,71,161,0.12);
      position:sticky;
      top:0;
      z-index:90;
      transform:translateY(0);
    }
    .left{
      display:flex;
      align-items:center;
      gap:16px;
    }
    .logo{
      display:flex;
      align-items:center;
      gap:10px;
    }
    .logo img{
      width:44px;
      height:44px;
      border-radius:8px;
      display:block;
    }
    .brand h1{
      margin:0;
      font-size:18px;
      font-weight:600;
      color:#fff;
    }
    .nav{
      display:flex;
      gap:12px;
      align-items:center;
      margin-left:8px;
    }
    .nav a{
      color:rgba(255,255,255,0.96);
      text-decoration:none;
      font-weight:600;
      padding:8px 10px;
      border-radius:8px;
      transition:all .18s;
      display:inline-block;
    }
    .nav a:hover{
      transform:translateY(-3px);
      background:rgba(255,255,255,0.06);
    }
    .nav a.active{
      background:rgba(255,255,255,0.12);
      box-shadow:0 6px 18px rgba(0,0,0,0.08);
    }

    .actions{
      display:flex;
      gap:10px;
      align-items:center;
    }
    .btn{
      background:#fff;
      color:var(--nav-bg);
      padding:8px 12px;
      border-radius:10px;
      border:none;
      cursor:pointer;
      font-weight:600;
      box-shadow:0 6px 18px rgba(13,71,161,0.08);
      transition:transform .12s,box-shadow .12s;
    }
    .btn:active{transform:scale(.98)}
    .ghost{
      background:transparent;
      border:1px solid rgba(255,255,255,0.12);
      color:#fff;
      padding:8px 10px;
      border-radius:10px;
      cursor:pointer;
    }
    .hamb{
      display:none;
      background:transparent;
      border:none;
      color:#fff;
      font-size:22px;
      cursor:pointer;
    }

    /* Text readability fix */
body.dark p,
body.dark h1,
body.dark h2,
body.dark h3,
body.dark h4,
body.dark label {
  color: #e8edf5 !important;
}


    /* Mobile menu */
    .mobile-menu{
      display:none;
      flex-direction:column;
      gap:10px;
      padding:12px 18px;
      background:var(--nav-bg);
      color:#fff;
    }
    .mobile-menu a{color:#fff;text-decoration:none;padding:8px 8px;border-radius:8px}

    /* Main login card */
    .center{
      display:flex;
      flex:1;
      align-items:center;
      justify-content:center;
      padding:32px;
    }
    .card{
      width:420px;
      background:var(--card);
      border-radius:14px;
      padding:30px;
      box-shadow:0 22px 44px rgba(13,71,161,0.06);
      text-align:center;
      transform:translateY(12px);
      opacity:0;
      animation:cardIn .48s forwards .12s;
    }
    @keyframes cardIn{to{transform:none;opacity:1}}
    .title{display:flex;flex-direction:column;gap:8px;align-items:center;margin-bottom:18px}
    .heartbeat{width:62px;height:62px;animation:heartbeat 1.4s infinite}
    @keyframes heartbeat{0%,100%{transform:scale(1)}50%{transform:scale(1.12)}}
    input{
      width:100%;
      padding:12px;
      border-radius:10px;
      border:1px solid #e6eefb;
      font-size:15px;
      background:transparent;
      color:inherit;
    }
    input:focus{outline:none;box-shadow:0 10px 30px rgba(13,71,161,0.06);border-color:var(--accent)}
    .btn-row{display:flex;gap:12px;margin-top:14px}
    .muted{font-size:13px;color:var(--muted);margin-top:12px}
    .error{color:var(--danger)}
    .success{color:var(--success)}

    footer{
      padding:14px;
      text-align:center;
      color:var(--muted);
      font-size:13px;
    }

    /* Nav link underline animation */
    .nav a::after{
      content:'';
      display:block;
      height:3px;
      background:rgba(255,255,255,0.15);
      border-radius:3px;
      margin-top:6px;
      transform:scaleX(0);
      transform-origin:left;
      transition:transform .2s;
    }
    .nav a:hover::after{transform:scaleX(1)}

    /* Dark mode improved styles (high contrast) */
    body.dark{
      color:#e9eef5;
      background:#071828;
    }
    body.dark .topbar{
      background:#071428;
      box-shadow:0 10px 32px rgba(0,0,0,0.6);
    }
    body.dark .nav a{color:#e9eef5}
    body.dark .nav a:hover{background:rgba(255,255,255,0.06)}
    body.dark .logo h1{color:#e9eef5}
    body.dark .card{
      background:#0d1b2b;
      color:#e9eef5;
      box-shadow:0 18px 48px rgba(0,0,0,0.55);
    }
    body.dark input{
      background:#122033;
      border:1px solid #29415c;
      color:#e9eef5;
    }
    body.dark input::placeholder{color:#93a2b7}
    body.dark .muted{color:#bfc7d0}
    body.dark footer{color:#bfc7d0}
    body.dark .ghost{color:#fff;border:1px solid rgba(255,255,255,0.36)}

    /* Responsive */
    @media(max-width:760px){
      .nav{display:none}
      .hamb{display:block}
      .card{width:92%}
      .mobile-menu{display:flex}
    }

    /* --- FIX: Cards visible in dark mode --- */
body.dark .card {
  background: #142235 !important;        /* Soft dark blue */
  border: 1px solid #2a3c55 !important;  /* Visible outline */
  color: #e6ebf3 !important;             /* Readable text */
  box-shadow: 0 12px 26px rgba(0,0,0,0.6) !important;
}

/* Fix text inside value boxes */
body.dark .valbox {
  background: #1b2d44 !important;
  color: #e6ebf3 !important;
}

/* Fix small text */
body.dark .small {
  color: #c8d1df !important;
}

/* Fix gauge container visibility */
body.dark #gBody,
body.dark #gAmb {
  background: transparent !important;
}

  </style>
</head>
<body>

  <!-- Topbar -->
  <header class="topbar" role="navigation" aria-label="Main navigation">
    <div class="left" style="align-items:center">
      <div class="logo" aria-hidden="true">
        <img src="https://cdn-icons-png.flaticon.com/512/2966/2966327.png" alt="HCMS logo">
      </div>

      <div class="brand" aria-hidden="true">
        <h1>HealthCare Monitoring</h1>
      </div>

      <nav class="nav" id="navLinks" aria-label="Primary">
        <a href="dashboard.html" id="link-home">Home</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>

    <div class="actions" role="group" aria-label="Actions">
      <button id="themeBtn" class="ghost" aria-pressed="false" title="Toggle dark mode">ðŸŒ“</button>
      <button id="hamb" class="hamb" aria-expanded="false" aria-controls="mobileMenu">â˜°</button>
    </div>
  </header>

  <!-- Mobile menu -->
  <div id="mobileMenu" class="mobile-menu" style="display:none">
    <a href="dashboard.html">Home</a>
    <a href="about.html">About</a>
    <a href="contact.html">Contact</a>
  </div>

  <!-- Main login card -->
  <main class="center" role="main">
    <div class="card" aria-live="polite">
      <div class="title">
        <img class="heartbeat" src="https://cdn-icons-png.flaticon.com/512/2966/2966327.png" alt="heart logo">
        <h2 style="margin:0;color:var(--accent)">ECG Monitor Login</h2>
        <div class="muted">Secure access to your health dashboard</div>
      </div>

      <form id="login-form" autocomplete="on" novalidate>
        <input id="email" type="email" placeholder="Enter Email" required />
        <div style="height:10px"></div>
        <input id="password" type="password" placeholder="Enter Password" required />
        <div style="height:12px"></div>

        <a href="#" id="forgot-password" style="color:var(--accent);display:inline-block;margin-bottom:8px">Forgot Password?</a>

        <p id="errorMsg" class="error" style="min-height:18px"></p>
        <p id="successMsg" class="success" style="min-height:18px"></p>

        <div class="btn-row">
          <button type="submit" class="btn" style="flex:1">Login</button>
          <button type="button" id="signup-btn" class="btn" style="flex:1;background:#43a047">Sign Up</button>
        </div>

        <div class="muted" style="margin-top:12px">A <strong style="color:var(--accent)">Smart Healthcare</strong> System for Real-Time ECG Monitoring</div>
      </form>
    </div>
  </main>

  <footer>Â© <span id="year"></span> HealthCare Monitoring System â€” Kanpur, India</footer>

  <!-- Firebase SDKs (v8 for compatibility with your login code) -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

  <script>
    // small helpers
    document.getElementById('year').innerText = new Date().getFullYear();
    const navLinks = document.getElementById('navLinks');
    const mobileMenu = document.getElementById('mobileMenu');
    const hamb = document.getElementById('hamb');
    const themeBtn = document.getElementById('themeBtn');

    // mobile toggle
    hamb.addEventListener('click', () => {
      const visible = mobileMenu.style.display === 'flex';
      mobileMenu.style.display = visible ? 'none' : 'flex';
      hamb.setAttribute('aria-expanded', String(!visible));
    });

    // theme handling (persist)
    function applyTheme(dark){
      document.body.classList.toggle('dark', !!dark);
      document.querySelector('.topbar').style.background = !!dark ? '#071428' : 'var(--nav-bg)';
      themeBtn.setAttribute('aria-pressed', !!dark);
      localStorage.setItem('hcms_dark', !!dark);
    }
    themeBtn.addEventListener('click', () => applyTheme(!document.body.classList.contains('dark')));
    if(localStorage.getItem('hcms_dark') === 'true') applyTheme(true);

    // Firebase initialization (existing)
    const firebaseConfig = {
      apiKey: "AIzaSyBwGtPqCsq9G74bem7C6qWuJNDoqTH6sts",
      authDomain: "iot-health-monitor-f0530.firebaseapp.com",
      databaseURL: "https://iot-health-monitor-f0530-default-rtdb.firebaseio.com",
      projectId: "iot-health-monitor-f0530",
      storageBucket: "iot-health-monitor-f0530.firebasestorage.app",
      messagingSenderId: "1036078967425",
      appId: "1:1036078967425:web:d01ccc6f982943c2aebb80",
      measurementId: "G-KX9B5SY10C"
    };
    try { firebase.initializeApp(firebaseConfig); } catch(e) { /* ignore if already initialized */ }
    const auth = firebase.auth();

    // DOM refs
    const loginForm = document.getElementById('login-form');
    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');
    const signupButton = document.getElementById('signup-btn');
    const forgotPasswordLink = document.getElementById('forgot-password');
    const errorMsg = document.getElementById('errorMsg');
    const successMsg = document.getElementById('successMsg');

    // redirect if already logged in
    auth.onAuthStateChanged(user => { if (user) window.location.href = 'dashboard.html'; });

    // Login
    loginForm.addEventListener('submit', (e) => {
      e.preventDefault();
      errorMsg.textContent = ''; successMsg.textContent = '';
      const email = emailInput.value.trim(), pwd = passwordInput.value.trim();
      if (!email || !pwd) { errorMsg.textContent = 'Please enter both email and password.'; return; }
      auth.signInWithEmailAndPassword(email, pwd)
        .catch(err => { errorMsg.textContent = err.message; });
    });

    // Sign Up
    signupButton.addEventListener('click', () => {
      errorMsg.textContent = ''; successMsg.textContent = '';
      const email = emailInput.value.trim(), pwd = passwordInput.value.trim();
      if (!email || !pwd) { errorMsg.textContent = 'Please enter both email and password to sign up.'; return; }
      auth.createUserWithEmailAndPassword(email, pwd)
        .then(()=> { alert('âœ… Account created! Redirecting to Home...'); window.location.href = 'dashboard.html'; })
        .catch(err=> errorMsg.textContent = err.message);
    });

    // Forgot password
    forgotPasswordLink.addEventListener('click', (e) => {
      e.preventDefault();
      errorMsg.textContent = ''; successMsg.textContent = '';
      const email = emailInput.value.trim();
      if (!email) { errorMsg.textContent = 'Please enter your email to reset your password.'; return; }
      auth.sendPasswordResetEmail(email)
        .then(()=> successMsg.textContent = 'âœ… Password reset email sent! Check inbox.')
        .catch(err => errorMsg.textContent = err.message);
    });
  </script>
</body>
</html>
